
    <header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">Setting up <code>HttpClient</code></h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/http/setup.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>Before you can use <code>HttpClient</code> in your app, you must configure it using <a href="guide/di">dependency injection</a>.</p>

  <h2 id="providing-httpclient-through-dependency-injection">
    <a href="#providing-httpclient-through-dependency-injection" class="docs-anchor" tabindex="-1" aria-label="Link to Providing <code>HttpClient</code> through dependency injection">Providing <code>HttpClient</code> through dependency injection</a>
  </h2>
  <p><code>HttpClient</code> is provided using the <code>provideHttpClient</code> helper function, which most apps include in the application <code>providers</code> in <code>app.config.ts</code>.</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> appConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ApplicationConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    provideHttpClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(),</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
    </pre>
  </div><p>If your app is using NgModule-based bootstrap instead, you can include <code>provideHttpClient</code> in the providers of your app&#39;s NgModule:</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">NgModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    provideHttpClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(),</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ... other application configuration</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span></code></pre>
    </pre>
  </div><p>You can then inject the <code>HttpClient</code> service as a dependency of your components, services, or other classes:</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({providedIn: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'root'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ConfigService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HttpClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // This service can now make HTTP requests via `this.http`.</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
  <h2 id="configuring-features-of-httpclient">
    <a href="#configuring-features-of-httpclient" class="docs-anchor" tabindex="-1" aria-label="Link to Configuring features of <code>HttpClient</code>">Configuring features of <code>HttpClient</code></a>
  </h2>
  <p><code>provideHttpClient</code> accepts a list of optional feature configurations, to enable or configure the behavior of different aspects of the client. This section details the optional features and their usages.</p>

  <h3 id="withfetch">
    <a href="#withfetch" class="docs-anchor" tabindex="-1" aria-label="Link to <code>withFetch</code>"><code>withFetch</code></a>
  </h3>
  <div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> appConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ApplicationConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    provideHttpClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      withFetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(),</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ),</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
    </pre>
  </div><p>By default, <code>HttpClient</code> uses the <a href="https://developer.mozilla.org/docs/Web/API/XMLHttpRequest" target="_blank"><code>XMLHttpRequest</code></a> API to make requests. The <code>withFetch</code> feature switches the client to use the <a href="https://developer.mozilla.org/docs/Web/API/Fetch_API" target="_blank"><code>fetch</code></a> API instead.</p>
<p><code>fetch</code> is a more modern API and is available in a few environments where <code>XMLHttpRequest</code> is not supported. It does have a few limitations, such as not producing upload progress events.</p>

  <h3 id="withinterceptors">
    <a href="#withinterceptors" class="docs-anchor" tabindex="-1" aria-label="Link to <code>withInterceptors(...)</code>"><code>withInterceptors(...)</code></a>
  </h3>
  <p><code>withInterceptors</code> configures the set of interceptor functions which will process requests made through <code>HttpClient</code>. See the <a href="guide/http/interceptors">interceptor guide</a> for more information.</p>

  <h3 id="withinterceptorsfromdi">
    <a href="#withinterceptorsfromdi" class="docs-anchor" tabindex="-1" aria-label="Link to <code>withInterceptorsFromDi()</code>"><code>withInterceptorsFromDi()</code></a>
  </h3>
  <p><code>withInterceptorsFromDi</code> includes the older style of class-based interceptors in the <code>HttpClient</code> configuration. See the <a href="guide/http/interceptors">interceptor guide</a> for more information.</p>

    <div class="docs-alert docs-alert-helpful">
    <p><strong>HELPFUL:</strong> Functional interceptors (through <code>withInterceptors</code>) have more predictable ordering and we recommend them over DI-based interceptors.</p>

    </div>
    
  <h3 id="withrequestsmadeviaparent">
    <a href="#withrequestsmadeviaparent" class="docs-anchor" tabindex="-1" aria-label="Link to <code>withRequestsMadeViaParent()</code>"><code>withRequestsMadeViaParent()</code></a>
  </h3>
  <p>By default, when you configure <code>HttpClient</code> using <code>provideHttpClient</code> within a given injector, this configuration overrides any configuration for <code>HttpClient</code> which may be present in the parent injector.</p>
<p>When you add <code>withRequestsMadeViaParent()</code>, <code>HttpClient</code> is configured to instead pass requests up to the <code>HttpClient</code> instance in the parent injector, once they&#39;ve passed through any configured interceptors at this level. This is useful if you want to <em>add</em> interceptors in a child injector, while still sending the request through the parent injector&#39;s interceptors as well.</p>

    <div class="docs-alert docs-alert-critical">
    <p><strong>CRITICAL:</strong> You must configure an instance of <code>HttpClient</code> above the current injector, or this option is not valid and you&#39;ll get a runtime error when you try to use it.</p>

    </div>
    
  <h3 id="withjsonpsupport">
    <a href="#withjsonpsupport" class="docs-anchor" tabindex="-1" aria-label="Link to <code>withJsonpSupport()</code>"><code>withJsonpSupport()</code></a>
  </h3>
  <p>Including <code>withJsonpSupport</code> enables the <code>.jsonp()</code> method on <code>HttpClient</code>, which makes a GET request via the <a href="https://en.wikipedia.org/wiki/JSONP" target="_blank">JSONP convention</a> for cross-domain loading of data.</p>

    <div class="docs-alert docs-alert-helpful">
    <p><strong>HELPFUL:</strong> Prefer using <a href="https://developer.mozilla.org/docs/Web/HTTP/CORS" target="_blank">CORS</a> to make cross-domain requests instead of JSONP when possible.</p>

    </div>
    
  <h3 id="withxsrfconfiguration">
    <a href="#withxsrfconfiguration" class="docs-anchor" tabindex="-1" aria-label="Link to <code>withXsrfConfiguration(...)</code>"><code>withXsrfConfiguration(...)</code></a>
  </h3>
  <p>Including this option allows for customization of <code>HttpClient</code>&#39;s built-in XSRF security functionality. See the <a href="best-practices/security">security guide</a> for more information.</p>

  <h3 id="withnoxsrfprotection">
    <a href="#withnoxsrfprotection" class="docs-anchor" tabindex="-1" aria-label="Link to <code>withNoXsrfProtection()</code>"><code>withNoXsrfProtection()</code></a>
  </h3>
  <p>Including this option disables <code>HttpClient</code>&#39;s built-in XSRF security functionality. See the <a href="best-practices/security">security guide</a> for more information.</p>

  <h2 id="httpclientmodule-based-configuration">
    <a href="#httpclientmodule-based-configuration" class="docs-anchor" tabindex="-1" aria-label="Link to <code>HttpClientModule</code>-based configuration"><code>HttpClientModule</code>-based configuration</a>
  </h2>
  <p>Some applications may configure <code>HttpClient</code> using the older API based on NgModules.</p>
<p>This table lists the NgModules available from <code>@angular/common/http</code> and how they relate to the provider configuration functions above.</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th><strong>NgModule</strong></th>
<th><code>provideHttpClient()</code> equivalent</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td><code>HttpClientModule</code></td>
<td><code>provideHttpClient(withInterceptorsFromDi())</code></td>
</tr>
<tr>
<td><code>HttpClientJsonpModule</code></td>
<td><code>withJsonpSupport()</code></td>
</tr>
<tr>
<td><code>HttpClientXsrfModule.withOptions(...)</code></td>
<td><code>withXsrfConfiguration(...)</code></td>
</tr>
<tr>
<td><code>HttpClientXsrfModule.disable()</code></td>
<td><code>withNoXsrfProtection()</code></td>
</tr>

      </tbody>
    </table>
  </div>
  
    <div class="docs-callout docs-callout-important">
      <h3>Use caution when using HttpClientModule in multiple injectors</h3>
      <p>When <code>HttpClientModule</code> is present in multiple injectors, the behavior of interceptors is poorly defined and depends on the exact options and provider/import ordering.</p>
<p>Prefer <code>provideHttpClient</code> for multi-injector configurations, as it has more stable behavior. See the <code>withRequestsMadeViaParent</code> feature above.</p>

    </div>
    